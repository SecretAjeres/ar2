<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes">
        <title>Учебник физики</title>
        <script src="libs/aframe.min.js"></script>
        <script src="libs/mindar-image-aframe.prod.js"></script>
        <script>
            class Target {
                constructor(element) {
                    this.content = document.getElementById(`${element.getAttribute('id')}-content`);
                    this.contentFrame = element.children[0];
                    element.addEventListener("targetFound", () => this.playContent());
                    element.addEventListener("targetLost", () => this.pauseContent());
                    this.content.addEventListener('loadeddata', () => this.contentFrame.setAttribute("visible", true));
                }

                playContent() {
                    this.content.play();
                }

                pauseContent() {
                    this.content.pause();
                }
            }

            document.addEventListener("DOMContentLoaded", function() {
                const targetElements = document.querySelectorAll(".target");
                targetElements.forEach(targetElement => {
                    new Target(targetElement);
                });
                
            });
        </script>
    </head>
    <body>
        <a-scene mindar-image="imageTargetSrc: targets.mind;" color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
            <a-assets>
                <video id="target0-content" preload="none" loop="true" src="content/0.mp4" webkit-playsinline playsinline></video>
                <video id="target1-content" preload="none" loop="true" src="content/1.mp4" webkit-playsinline playsinline></video>
                <video id="target2-content" preload="none" loop="true" src="content/2.mp4" webkit-playsinline playsinline></video>
                <video id="target3-content" preload="none" loop="true" src="content/3.mp4" webkit-playsinline playsinline></video>
                <video id="target4-content" preload="none" loop="true" src="content/4.mp4" webkit-playsinline playsinline></video>
                <video id="target5-content" preload="none" loop="true" src="content/5.mp4" webkit-playsinline playsinline></video>
                <video id="target6-content" preload="none" loop="true" src="content/6.mp4" webkit-playsinline playsinline></video>
                <video id="target7-content" preload="none" loop="true" src="content/7.mp4" webkit-playsinline playsinline></video>
            </a-assets>
            <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
            <a-entity class="target" id="target0" mindar-image-target="targetIndex: 0">
                <a-video visible="false" src="#target0-content"></a-video>
            </a-entity>
            <a-entity class="target" id="target1" mindar-image-target="targetIndex: 1">
                <a-video visible="false" src="#target1-content"></a-video>
            </a-entity>
            <a-entity class="target" id="target2" mindar-image-target="targetIndex: 2">
                <a-video visible="false" src="#target2-content"></a-video>
            </a-entity>
            <a-entity class="target" id="target3" mindar-image-target="targetIndex: 3">
                <a-video visible="false" src="#target3-content"></a-video>
            </a-entity>
            <a-entity class="target" id="target4" mindar-image-target="targetIndex: 4">
                <a-video visible="false" src="#target4-content"></a-video>
            </a-entity>
            <a-entity class="target" id="target5" mindar-image-target="targetIndex: 5">
                <a-video visible="false" src="#target5-content"></a-video>
            </a-entity>
            <a-entity class="target" id="target6" mindar-image-target="targetIndex: 6">
                <a-video visible="false" src="#target6-content"></a-video>
            </a-entity>
            <a-entity class="target" id="target7" mindar-image-target="targetIndex: 7">
                <a-video visible="false" src="#target7-content"></a-video>
            </a-entity>
        </a-scene>
    </body>
</html>